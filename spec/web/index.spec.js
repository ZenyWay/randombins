(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function isString(e){return"string"==typeof(e&&e.valueOf())}function push(e,t){return e.push(t),e}var src_1=require("../src"),most=require("most"),result={},ALPHABETS=["0123","abcd","ABCD"],ALPHABETS_32768_3=["012345","abcdefghijklmnop","ABCDEFGHIJKLMNOP"].concat(ALPHABETS),ALPHABETS_ITERABLE=(_a={},_a[Symbol.iterator]=function(){var e=Object.create(this);return e.keys=ALPHABETS.keys(),e},_a.next=function(){var e=this.keys.next();return{done:e.done,value:e.done?void 0:this.alphabets[e.value]}},_a.alphabets=ALPHABETS,_a),ALPHABET$=most.from(ALPHABETS),COMBINATION$=most.from(["0aA","0aB","0aC","0aD","0bA","0bB","0bC","0bD","0cA","0cB","0cC","0cD","0dA","0dB","0dC","0dD","1aA","1aB","1aC","1aD","1bA","1bB","1bC","1bD","1cA","1cB","1cC","1cD","1dA","1dB","1dC","1dD","2aA","2aB","2aC","2aD","2bA","2bB","2bC","2bD","2cA","2cB","2cC","2cD","2dA","2dB","2dC","2dD","3aA","3aB","3aC","3aD","3bA","3bB","3bC","3bD","3cA","3cB","3cC","3cD","3dA","3dB","3dC","3dD"]),COMBINATION_32678_3$=most.iterate(function(e){return++e},0).take(98304),ALPHABETS_OUT_OF_RANGE_1_3=["01","ab"],ALPHABETS_OUT_OF_RANGE_32768_3=["01234",new Array(19662).join("*")],RANDOM_WORDS=new Uint16Array([0,9363,21846]),RANDOM_SIZE_BINS=["0aA","0aB","1cB","3aC"],SHUFFLED=["2bA","0aA","3cD","1dD"];beforeEach(function(){delete result.value,delete result.error}),describe("getRandomBins (opts?: Partial<RandomBinsFactorySpec>): (alphabets: string[]|Stream<string>): Promise<string[]>",function(){describe("when called without argument",function(){beforeEach(function(){try{result.value=src_1.default()}catch(e){result.error=e}}),it("returns the default `randombins (alphabets: string[]|Stream<string>): Promise<string[]>` function",function(){expect(result.error).toBeUndefined(),expect(result.value).toEqual(jasmine.any(Function))})})}),describe("randombins (alphabets: string[]|Stream<string>): Promise<string[]>",function(){var e,t,r,n;beforeEach(function(){e=jasmine.createSpy("toCombination$").and.returnValues(COMBINATION$,COMBINATION$,COMBINATION$,COMBINATION_32678_3$),t=jasmine.createSpy("randomwords").and.returnValue(RANDOM_WORDS),r=jasmine.createSpy("randomshuffle").and.returnValue(SHUFFLED),n=src_1.default({size:4,toCombination$:e,randomwords:t,randomshuffle:r})}),describe("when given an Iterable or Stream of strings",function(){beforeEach(function(e){most.from([ALPHABETS,ALPHABETS_ITERABLE,ALPHABET$,ALPHABETS_32768_3]).map(n).await().reduce(push,[]).then(function(e){return result.value=e}).catch(function(e){return result.error=e}).then(function(){return setTimeout(e)})},3e4),it("resolves to an Array<string> instance with shuffled, randomly selected combinations of characters from each alphabet in the given sequence",function(){expect(result.value).toEqual([SHUFFLED,SHUFFLED,SHUFFLED,SHUFFLED]),expect(result.error).toBeUndefined(),expect(e.calls.allArgs()).toEqual([[ALPHABETS],[ALPHABETS_ITERABLE],[ALPHABET$],[ALPHABETS_32768_3]]),expect(t.calls.allArgs()).toEqual([[3],[3],[3],[3]]),expect(r.calls.allArgs()).toEqual([[RANDOM_SIZE_BINS],[RANDOM_SIZE_BINS],[RANDOM_SIZE_BINS],[[0,1,37449,76459]]])})}),describe("when not given any argument",function(){beforeEach(function(e){n().then(function(e){return result.value=e}).catch(function(e){return result.error=e}).then(function(){return setTimeout(e)})}),it('rejects with an "invalid argument" TypeError',function(){expect(result.value).toBeUndefined(),expect(result.error).toEqual(jasmine.any(TypeError)),expect(result.error.message).toBe("invalid argument")})}),describe("when given anything else than an Iterable or Stream of strings",function(){beforeEach(function(e){most.from([null,void 0,!0,42,function(){},[42,"foo"],{foo:"foo"}]).map(n).map(most.fromPromise).flatMap(function(e){return e.recoverWith(function(e){return most.of(e)})}).reduce(push,[]).then(function(e){return result.error=e}).then(function(){return setTimeout(e)})}),it('rejects with an "invalid argument" TypeError',function(){expect(result.error.length).toBe(7),result.error.forEach(function(e){expect(e).toEqual(jasmine.any(TypeError)),expect(e.message).toBe("invalid argument")})})}),describe("when given an Iterable or Stream of strings that results in an average bin size outside the valid range of ]1, 32768[",function(){beforeEach(function(t){e.and.returnValue(COMBINATION$),most.from([ALPHABETS_OUT_OF_RANGE_1_3,ALPHABETS_OUT_OF_RANGE_32768_3]).map(n).map(most.fromPromise).flatMap(function(e){return e.recoverWith(function(e){return most.of(e)})}).reduce(push,[]).then(function(e){return result.error=e}).then(function(){return setTimeout(t)})},2e4),it('rejects with a "bin size out-of-range" RangeError',function(){expect(result.error.length).toBe(2),result.error.forEach(function(e){expect(e).toEqual(jasmine.any(RangeError)),expect(e.message).toBe("bin size out-of-range")})})})});var _a;
},{"../src":2,"most":undefined}],2:[function(require,module,exports){
"use strict";function default_1(r){var e=getRandomBinsSpec(r);return function(r){var n=e.toCombination$(r);return calculateCombinationsLength(r).then(function(r){return random_size_bins_1.default(e.randomwords,n,r,e.size)}).then(e.randomshuffle)}}function getRandomBinsSpec(r){return{size:r&&r.size||256,toCombination$:r&&r.toCombination$||ordered_char_combinations_1.default,randomwords:r&&r.randomwords||randomwords_1.default(),randomshuffle:r&&r.randomshuffle||randomshuffle_1.default()}}function calculateCombinationsLength(r){try{return most_1.from(r).map(function(r){return assert(isString(r),"invalid argument")&&r.length}).reduce(product,1)}catch(r){return Promise.reject(new TypeError("invalid argument"))}}function product(r,e){return r*e}function assert(r,e){if(r)return!0;throw new TypeError(e)}function isString(r){return"string"==typeof(r&&r.valueOf())}var random_size_bins_1=require("./random-size-bins"),ordered_char_combinations_1=require("ordered-char-combinations"),randomwords_1=require("randomwords"),randomshuffle_1=require("randomshuffle"),most_1=require("most");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1;
},{"./random-size-bins":3,"most":undefined,"ordered-char-combinations":undefined,"randomshuffle":undefined,"randomwords":undefined}],3:[function(require,module,exports){
"use strict";function default_1(e,i,t,n){var o=i.take(1),r=t-1,u=n-1;return isValidBinSize(r/u)?most_1.from(e(u)).loop(function(e,i){var t=e.combination$,n=e.index,o=n+r,a=Math.floor(o/u)-Math.floor(n/u),s=a*i>>>16;return{value:t.skip(s).take(1),seed:{combination$:t.skip(a),index:o}}},{combination$:i.skip(1),index:0}).startWith(o).join().reduce(push,[]):Promise.reject(new RangeError("bin size out-of-range"))}function isValidBinSize(e){return e>1&&e<32768}function push(e,i){return e.push(i),e}var most_1=require("most");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1;
},{"most":undefined}]},{},[1]);
